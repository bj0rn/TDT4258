\section{Results and Tests}

\subsection{Energy optimization}
During this assignment we have employed several methods for decreasing the power consumption of the program. We have focused on power consumption of both when the program idle and active. The eAprofiler in the simplicity studio bundle has been used to analyze the power consumption at various stages in the program. For completeness both the power consumptions before and after the an optimization is illustrated.


\subsubsection{Idle}
When the program is idle the power consumption is reduced. The energy optimized program should consume   significantly less energy. The high frequency peripheral is turned off, the low energy oscillator is turned off and the DAC is partly turned off. The CPU remain in deep sleep during this time. The output from the eAprofiler for the energy optimized program can be seen in figure 3 for comparison the non optimized program can be seen in figure 4. 


\input{fig/EnergyModeIdle.tex}
\input{fig/Timer1Idle.tex}

As seen the the energy usage is set at an comfortable level of 74 micro amperes. This is significantly less than before the optimization, where the idle processor consume 4.5 milli amperes.  


\subsubsection{Running the syntheizer}
When the synthesiser is active the CPU and the DAC is not utilised every clock cycle. It is possible to exploit this by disabling the CPU and disable the DAC between samples. The low energy timer is still active, but should reduce energy compared to timer1. The energy consumption is illustrated in figure 5. The non optimized program can be seen in figure ??.    

\input{fig/LowEnergyOutput.tex}


As seen by comparing the figures, the gains are significant when turning off the components during idle cycles. 


\subsubsection{Running with samples}
When using pre-computed samples we use the same ideas that pointed out above. However, the result is slightly different. The number of idle cycles is increased. The CPU do not need to perform expensive operations, as with the synthesiser. This increases the time the CPU and DAC can spend in sleep mode, which impact the overall energy consumption.   





\subsection{Sound functionality}



\subsubsection{Sound effects}


\subsubsection{Music}


